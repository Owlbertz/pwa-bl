App.Store=(()=>{let a,b;return{open:function(){return new Promise((c,f)=>{b&&c(),a=indexedDB.open('bl-data',1),a.onupgradeneeded=g=>{let h=g.target.result;h.objectStoreNames.contains('data')||h.createObjectStore('data',{keyPath:'week'})},a.onsuccess=g=>{b=g.target.result,c()},a.onerror=g=>{void 0,f(g)}})},add:function(c,f){return new Promise((g,h)=>{let i=b.transaction(['data'],'readwrite'),j=i.objectStore('data');request=j.put({week:c,data:f,added:new Date}),request.onerror=k=>{h(k)},request.onsuccess=k=>{g()}})},get:function(c){return new Promise((f,g)=>{let h=b.transaction(['data'],'readonly'),i=h.objectStore('data'),j=i.get(c);j.onerror=k=>{g(k)},j.onsuccess=k=>{let l=k.target.result;l&&(l=l.data),void 0,f(l)}})},getAll:function(){return new Promise((c,f)=>{let g=b.transaction(['data'],'readonly'),h=g.objectStore('data'),i=h.getAll();i.onerror=j=>{f(j)},i.onsuccess=j=>{let k=j.target.result;if(k){let l=[];k.forEach(function(m){l=l.concat(m.data)}),k=l}void 0,c(k)}})}}})();