App.Predictions=(()=>{return{getPrediction:function(a){return App.Store.open('predictions').then(()=>{return App.Store.get('predictions',a)})},setPrediction:function(a,b){return App.Store.open('predictions').then(()=>{return App.Store.add('predictions',a,b)})},render:function(a,b){let c=a.getAttribute('data-match-id'),d=a.classList.contains('ongoing'),f=a.classList.contains('finished'),g=a.q('.predictions');this.getPrediction(c).then(h=>{h?(g.q('.team1').value=h.team1,g.q('.team2').value=h.team2,g.q('.time').textContent=App.Util.dateParser(h.date),g.q('.time-container').classList.remove('hide')):g.q('.time-container').classList.add('hide')}),(f||d)&&(g.q('.team1').setAttribute('disabled',!0),g.q('.team1').removeAttribute('required'),g.q('.team2').setAttribute('disabled',!0),g.q('.team2').removeAttribute('required'),g.q('.save-prediction-button').remove()),a.q('form').addEventListener('submit',h=>{h.preventDefault();let i={team1:parseInt(a.q('.team1').value),team2:parseInt(a.q('.team2').value),date:new Date};(i.team1||i.team2)&&(new Date(b.MatchDateTime)<new Date&&(App.showNotice?App.showNotice('Prediction not possible.'):void 0),this.setPrediction(c,i).then(()=>{App.showNotice&&App.showNotice('Saving successful.'),this.render(a,b)},j=>{App.showNotice?App.showNotice('An error occured.'):void 0}))})}}})();