App.Predictions=(()=>{return{getPrediction:function(a){return App.Store.open('predictions').then(()=>{return App.Store.get('predictions',a)})},setPrediction:function(a,b){return App.Store.open('predictions').then(()=>{return App.Store.add('predictions',a,b)})},render:function(a,b){let c=a.getAttribute('data-match-id'),d=a.classList.contains('ongoing'),f=a.classList.contains('finished');this.getPrediction(c).then(g=>{g?(a.q('.prediction-team1').value=g.team1,a.q('.prediction-team2').value=g.team2,a.q('.prediciton-time').textContent=App.Util.dateParser(g.date),a.q('.prediction-time-container').classList.remove('hide')):a.q('.prediction-time-container').classList.add('hide')}),(f||d)&&(a.q('.prediction-team1').setAttribute('disabled',!0),a.q('.prediction-team1').removeAttribute('required'),a.q('.prediction-team2').setAttribute('disabled',!0),a.q('.prediction-team2').removeAttribute('required'),a.q('.save-prediction-button').remove()),a.q('form').addEventListener('submit',g=>{g.preventDefault();let h={team1:parseInt(a.q('.prediction-team1').value),team2:parseInt(a.q('.prediction-team2').value),date:new Date};(h.team1||h.team2)&&(new Date(b.MatchDateTime)<new Date&&(App.showNotice?App.showNotice('Prediction not possible.'):void 0),this.setPrediction(c,h).then(()=>{App.showNotice&&App.showNotice('Saving successful.'),this.render(a,b)},i=>{App.showNotice?App.showNotice('An error occured.'):void 0}))})}}})();